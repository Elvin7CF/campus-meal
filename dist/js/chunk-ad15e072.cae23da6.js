(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ad15e072"],{"857f":function(t,e,n){},bd64:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"comment"}},[n("div",{ref:"comment",staticClass:"scroll-container"},[n("article",[n("div",{staticClass:"comment-score-container"},[n("div",[n("span",{staticClass:"comment-score"},[t._v(t._s(t.poi_info.wm_poi_score))]),n("h3",[t._v("商家评分")])]),n("div",[n("div",[n("span",[t._v("口味")]),n("v-star",{attrs:{score:t.poi_info.food_score}}),n("span",{staticClass:"food-score"},[t._v(t._s(t.poi_info.food_score))])],1),n("div",[n("span",[t._v("包装")]),n("v-star",{attrs:{score:t.poi_info.pack_score}}),n("span",{staticClass:"pack-score"},[t._v(t._s(t.poi_info.pack_score))])],1)]),n("div",[n("span",{staticClass:"delivery-score"},[t._v(t._s(t.poi_info.delivery_score))]),n("h3",[t._v("配送评分")])])]),t._m(0),n("ul",{staticClass:"comment-score-type-tip"},[t._l(t.commentData.comment_score_type_infos,(function(e){return n("li",{key:e.comment_score_title},[t._v("\n          "+t._s(e.comment_score_title)+" "+t._s(e.total_count)+"\n        ")])})),t._l(t.commentData.labels,(function(e){return n("li",{key:e.label_id},[t._v(t._s(e.content)+" "+t._s(e.label_count))])}))],2),n("article",{staticClass:"comments-container"},t._l(t.commentData,(function(e){return n("section",{key:e.id},[n("div",{staticClass:"user-pic-url"},[n("img",{attrs:{src:e.avatar}})]),n("div",{staticClass:"comment-main-part"},[n("div",[n("span",{staticClass:"user-name"},[t._v(t._s(e.user_name))]),n("span",{staticClass:"comment-time"},[t._v(t._s(e.comment_time.slice(0,10)))])]),n("div",{staticClass:"order-comment-score"},[n("span",[t._v("评分 "),n("v-star",{attrs:{score:e.food_score}})],1)]),n("p",{staticClass:"comment"},[t._v(t._s(e.comment_data))]),n("div",{staticClass:"comment-pic"},t._l(e.pic_url,(function(e,s){return n("div",{key:s,on:{click:function(n){return t.show_big_pic_event(e)}}},[n("img",{attrs:{src:e}})])})),0),e.add_comment_list?n("div",{staticClass:"poi-reply-contents-container"}):t._e()])])})),0),n("div",{ref:"loading",staticClass:"loading-container"},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.loading&&!t.noMore,expression:"loading && !noMore"}],staticClass:"loading"},[t._v("正在努力加载中…")]),n("span",{directives:[{name:"show",rawName:"v-show",value:t.noMore,expression:"noMore"}],staticClass:"no-more"},[t._v("已经到底了")])])])]),n("transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.show_big_pic,expression:"show_big_pic"}],staticClass:"show-big-pic",on:{click:function(e){t.show_big_pic=!1}}},[n("div",[n("img",{attrs:{src:t.big_pic_url}})])])])],1)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"comment-score-type-info"},[n("li",{staticClass:"active"},[t._v("全部")]),n("li",[t._v("有图")]),n("li",[n("i",{staticClass:"iconfont"},[t._v("")]),t._v(" 点评(0.0分)")])])}],i=n("1fba"),a=n("00dc"),c={data:function(){return{commentData:[],comment_score_type:{0:"全部",1:"好评",5:"有图好评"},big_pic_url:"",show_big_pic:!1,poi_info:{},noMore:!1,loading:!1,offset:0,BScrollEvent:null}},mounted:function(){var t=this;t.restaurant_id=t.$route.query.id,t.fetchComment((function(e){t.commentData=e.data.data,t.$nextTick((function(){t.BScrollEvent=new i["a"](t.$refs.comment,{click:!0,probeType:2}),t.listenScroll()}))})),Object(a["b"])({restaurant_id:t.restaurant_id}).then((function(e){t.poi_info=e.data.data}))},methods:{fetchComment:function(t){Object(a["d"])({restaurant_id:this.restaurant_id,offset:this.offset,limit:5}).then((function(e){t(e)}))},date_format:function(t){var e=new Date(1e3*t);return e.getFullYear()+"."+e.getMonth()+"."+e.getDay()},show_big_pic_event:function(t){this.big_pic_url=t,this.show_big_pic=!0},match_topic:function(t){var e=/(#[^#]*#)(.+)/g,n=e.exec(t);return n?'<strong style="color:#576b95; font-weight: normal">'.concat(n[1],"</strong>").concat(n[2]):t},listenScroll:function(){var t=this,e=t.$refs.comment;t.BScrollEvent.on("scroll",(function(n){Math.abs(n.y)+e.clientHeight>=e.childNodes[0].clientHeight-30&&(t.loading||(t.loading=!0,t.fetchComment((function(e){e.data.data.length?(t.offset++,t.commentData=t.commentData.concat(e.data.data),t.$nextTick((function(){t.BScrollEvent.refresh()}))):t.noMore=!0,t.loading=!1}))))}))}}},r=c,l=(n("c298"),n("2877")),_=Object(l["a"])(r,s,o,!1,null,"3ff2eda5",null);e["default"]=_.exports},c298:function(t,e,n){"use strict";n("857f")}}]);
//# sourceMappingURL=chunk-ad15e072.cae23da6.js.map