(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-008d4162"],{"7e04":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"confirm-order"}},[a("v-head",{attrs:{title:"提交订单",goBack:"true",bgColor:"#f4f4f4"}}),a("div",{staticClass:"delivery-info-container"},[t.emptyAddress?a("router-link",{staticClass:"info-container address-container",attrs:{to:"/add_address"}},[a("div",{staticClass:"address-info"},[a("i",{staticClass:"iconfont icon-add"},[t._v("")]),a("span",{staticClass:"add-text"},[t._v("新增收货地址")])]),a("i",{staticClass:"iconfont icon-right"},[t._v("")])]):a("router-link",{staticClass:"info-container address-container",attrs:{to:"/confirmOrder/address"}},[a("div",{staticClass:"address-info"},[a("i",{staticClass:"iconfont icon-location"},[t._v("")]),a("div",{staticClass:"main-info"},[a("p",{staticClass:"address"},[t._v(t._s(t.defineAddress.address))]),a("span",{staticClass:"name"},[t._v(t._s(t.defineAddress.name))]),a("span",{staticClass:"gender"},[t._v(t._s(t.gender))]),a("span",{staticClass:"phone"},[t._v(t._s(t.defineAddress.phone))])])]),a("i",{staticClass:"iconfont icon-right"},[t._v("")])]),t._m(0)],1),a("div",{staticClass:"container"},[t.poi_info?a("div",{staticClass:"head"},[a("i",{staticClass:"poi-icon",style:{backgroundImage:"url("+t.poi_info.pic_url+")"}}),a("span",{staticClass:"poi-name"},[t._v(t._s(t.poi_info.name))]),a("span",{staticClass:"delivery-type-icon",style:{backgroundImage:"url(http://p0.meituan.net/aichequan/019c6ba10f8e79a694c36a474d09d81b2000.png)"}})]):t._e(),a("ul",{staticClass:"food-list"},t._l(t.order_data,(function(e,n){return Number(n)?a("li",{key:e.id},[a("div",{staticClass:"picture"},[a("img",{attrs:{src:e.foods_pic}})]),a("div",{staticClass:"food-list-right-part"},[a("div",[a("span",{staticClass:"name"},[t._v(t._s(e.name))]),a("span",{staticClass:"price"},[t._v("￥"+t._s(e.price))])]),a("div",[a("span",{staticClass:"count"},[t._v("x"+t._s(e.num))])])])]):t._e()})),0),t._m(1),a("div",{staticClass:"total-price-container"},[a("span",[t._v("已优惠￥0")]),a("span",{staticClass:"total-price"},[t._v("小计"),a("strong",[t._v("￥"+t._s(t.totalPrice))])])])]),a("div",{staticClass:"bottom"},[a("div",{staticClass:"left"},[a("span",{staticClass:"discount-fee"},[t._v("已优惠￥0")]),a("span",{staticClass:"total"},[t._v("合计"),a("strong",[t._v("￥"+t._s(t.totalPrice))])])]),a("span",{staticClass:"submit",on:{click:function(e){return t.submit()}}},[t._v("提交订单")])]),a("router-view"),a("alert-tip",{attrs:{text:t.alertText,showTip:t.showTip},on:{"update:showTip":function(e){t.showTip=e},"update:show-tip":function(e){t.showTip=e}}})],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"info-container arrival-container"},[a("div",{staticClass:"arrival-info"},[a("i",{staticClass:"iconfont icon-time"},[t._v("")]),a("div",{staticClass:"main-info"},[a("span",{staticClass:"date-type-tip"},[t._v("送达时间")]),a("span",{staticClass:"select-view-time"},[t._v("10：25分到")])])]),a("i",{staticClass:"iconfont icon-right"},[t._v("")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"other-fee-container"},[a("li",[a("span",[t._v("包装费")]),a("span",{staticClass:"box-total-price"},[t._v("￥0")])]),a("li",[a("span",[t._v("配送费")]),a("span",[t._v("￥0")])])])}],s=(a("8e6e"),a("c5f6"),a("ac6a"),a("456d"),a("bd86")),i=a("00dc"),c=a("c24f"),o=a("f8b7"),d=a("2f62");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var f={data:function(){return{order_data:null,defineAddress:{},poi_info:null,totalPrice:0,totalNum:0,restaurant_id:null,emptyAddress:!0,alertText:"",showTip:!1,preventRepeat:!1}},computed:l(l({},Object(d["b"])(["deliveryAddress"])),{},{gender:function(){return"male"===this.defineAddress.gender?"先生":"女士"}}),methods:{submit:function(){var t=this;if(this.emptyAddress)return this.alertText="请添加收货地址",void(this.showTip=!0);if(!this.preventRepeat){this.preventRepeat=!0;var e=[],a=Object.keys(this.order_data);a.forEach((function(a){Number(a)&&e.push({skus_id:a,num:t.order_data[a]["num"]})})),Object(o["f"])({restaurant_id:this.restaurant_id,foods:e,address_id:this.defineAddress.id}).then((function(e){200===e.data.status&&t.$router.push({path:"/pay",query:{order_id:e.data.order_id}})}))}}},created:function(){var t=this,e=JSON.parse(localStorage.getItem("confirmOrderData"));this.restaurant_id=e.restaurant_id,this.totalNum=e.foods.totalNum,this.order_data=e.foods,Object(c["f"])().then((function(e){var a=e.data;a.address.length?(t.emptyAddress=!1,t.defineAddress=a.address[0]):t.emptyAddress=!0})),Object(i["b"])({restaurant_id:this.restaurant_id}).then((function(a){t.poi_info=a.data.data,t.totalPrice=Number(e.foods.totalPrice).toFixed(2)}))},watch:{deliveryAddress:function(t){this.defineAddress=t}}},v=f,p=(a("a9a0"),a("2877")),_=Object(p["a"])(v,n,r,!1,null,"c9238d62",null);e["default"]=_.exports},a9a0:function(t,e,a){"use strict";a("e540")},c24f:function(t,e,a){"use strict";a.d(e,"f",(function(){return r})),a.d(e,"a",(function(){return s})),a.d(e,"d",(function(){return i})),a.d(e,"g",(function(){return c})),a.d(e,"h",(function(){return o})),a.d(e,"b",(function(){return d})),a.d(e,"c",(function(){return u})),a.d(e,"e",(function(){return l}));var n=a("365c"),r=function(t){var e={data:t,url:"admin/all_address"};return Object(n["b"])(e)},s=function(t){var e={data:t,url:"admin/address"};return Object(n["c"])(e)},i=function(t){var e={data:t,url:"admin/address"};return Object(n["a"])(e)},c=function(t){var e={data:t,url:"admin/user_login"};return Object(n["c"])(e)},o=function(t){var e={data:t,url:"admin/user_info"};return Object(n["b"])(e)},d=function(t){var e={data:t,url:"admin/change_avatar"};return Object(n["c"])(e)},u=function(t){var e={data:t,url:"v1/my_comment"};return Object(n["b"])(e)},l=function(t){var e={data:t,url:"v1/comment"};return Object(n["a"])(e)}},e540:function(t,e,a){},f8b7:function(t,e,a){"use strict";a.d(e,"f",(function(){return r})),a.d(e,"a",(function(){return s})),a.d(e,"d",(function(){return i})),a.d(e,"e",(function(){return c})),a.d(e,"c",(function(){return o})),a.d(e,"b",(function(){return d}));var n=a("365c"),r=function(t){var e={data:t,url:"v1/order"};return Object(n["c"])(e)},s=function(t){var e={data:t,url:"v1/pay"};return Object(n["c"])(e)},i=function(t){var e={url:"v1/order/".concat(t.order_id)};return Object(n["b"])(e)},c=function(t){var e={data:t,url:"v1/orders"};return Object(n["b"])(e)},o=function(t){var e={data:t,url:"v1/comment"};return Object(n["c"])(e)},d=function(t){var e={data:t,url:"v1/listen_status"};return Object(n["b"])(e)}}}]);
//# sourceMappingURL=chunk-008d4162.f045bfdf.js.map